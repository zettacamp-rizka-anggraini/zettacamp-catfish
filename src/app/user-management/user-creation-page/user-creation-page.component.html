<div class="container">
  <a routerLink="/user-management"
    >&larr; {{ "userButton.back" | translate }}</a
  >
  <mat-form-field appearance="outline" style="position: relative; float: right">
    <mat-label>{{ "userLang.lang" | translate }}</mat-label>
    <mat-select name="lang" (valueChange)="changeLang($event)">
      <mat-option *ngFor="let langu of lang" [value]="langu.value">
        {{ langu.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
    <!-- id number -->
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>{{ "userForm.id" | translate }}</mat-label>
      <input type="text" matInput formControlName="id"/>
      <mat-error *ngIf="this.signUpForm.get('id')?.invalid">{{"userError.errorId" | translate}}</mat-error>
    </mat-form-field>
    <!-- name -->
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>{{ "userForm.name" | translate | lowercase }}</mat-label>
      <input type="text" matInput formControlName="name" />
      <mat-error *ngIf="this.signUpForm.get('name')?.invalid">{{"userError.errorName" | translate}}</mat-error>
    </mat-form-field>

    <!-- age -->
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>{{ "userForm.age" | translate }}</mat-label>
      <input type="number" matInput name="age" formControlName="age" />
      <mat-error *ngIf="this.signUpForm.get('age')?.invalid">{{"userError.errorAge" | translate}}</mat-error>
    </mat-form-field>

    <!-- gender -->
    <label>{{ "userForm.gender" | translate }}</label
    ><br />
    <mat-radio-group formControlName="gender" aria-label="Select an option">
      <mat-radio-button name="gmale" value="male">{{
        "userGender.Male" | translate
      }}</mat-radio-button>
      <mat-radio-button name="gfemale" value="female">{{
        "userGender.Female" | translate
      }}</mat-radio-button> </mat-radio-group
    ><br/><br />

    <!-- email -->
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>{{ "userForm.email" | translate }}</mat-label>
      <input type="text" formControlName="email" matInput placeholder="pat@example.com" name="email" required/>
      <mat-error *ngIf="this.signUpForm.get('email')?.invalid">{{getEmailErrorMessage()}}</mat-error>
    </mat-form-field>

    <!-- position -->
    <mat-form-field appearance="fill" style="margin-right: 20px">
      <mat-label>{{ "userForm.position" | translate }}</mat-label>
      <mat-select name="positions" formControlName="position">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let post of positions" [value]="post.value">
          {{ "userPosition." + post.viewValue | translate }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="this.signUpForm.get('position')?.invalid">Select Your Position</mat-error>
    </mat-form-field>

    <!-- martial status -->
    <mat-form-field appearance="fill">
      <mat-label>{{ "userForm.martial_status" | translate }}</mat-label>
      <mat-select name="martialstatus" formControlName="martial_status">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let status of martialStatus" [value]="status.value">
          {{ "userMartial." + status.viewValue | translate }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="this.signUpForm.get('martial_status')?.invalid">Input Your Martial Status</mat-error>
    </mat-form-field>

    <!-- address -->
    <div formArrayName="address">
      <div *ngFor="let item of addresses.controls; let i = index">
        <div [formGroupName]="i">
          <div style="display: flex; align-items: center;">
            <mat-label><h1>{{ "userForm.address" | translate }}&emsp;</h1></mat-label>
            <mat-form-field appearance="outline" style="position: relative; float: left">
              <mat-label>{{ "userLabel.Select" | translate }}</mat-label>
              <mat-select name="labelStatus" formControlName="status">
                <mat-option *ngFor="let label of labelAddress" [value]="label.value">
                  {{ "userLabel." + label.viewValue | translate }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>{{ "userForm.address" | translate }}</mat-label>
            <input
              formControlName="address_name"
              type="text"
              matInput
              id="address_name"
            />
            <mat-error *ngIf="this.addresses.at(i).get('address_name')?.invalid">Input Your Address</mat-error>
          </mat-form-field>

          <table class="example-full-width" cellspacing="0">
            <tr>
              <td>
                <mat-form-field class="example-50-width space" appearance="fill">
                  <mat-label>{{ "userForm.zip_code" | translate }}</mat-label>
                  <input formControlName="zip_code" type="number" matInput />
                  <mat-error *ngIf="this.addresses.at(i).get('zip_code')?.invalid">Input Your Zip Code</mat-error>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="example-50-width space" appearance="fill">
                  <mat-label>{{ "userForm.city" | translate }}</mat-label>
                  <input formControlName="city" type="text" matInput />
                  <mat-error *ngIf="this.addresses.at(i).get('city')?.invalid">Input Your City</mat-error>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field class="example-50-width space" appearance="fill">
                  <mat-label>{{ "userForm.country" | translate }}</mat-label>
                  <input formControlName="country" type="text" matInput />
                  <mat-error *ngIf="this.addresses.at(i).get('country')?.invalid">Input Your Country</mat-error>
                </mat-form-field>
              </td>
            </tr>
          </table>
          <mat-card-actions align="end">
            <button
              mat-raised-button
              color="primary"
              style="margin-right: 20px"
              (click)="removeAddress(i)"
              type="button"
              [disabled]="status"
            >
              &plus; {{ "userButton.removeAddress" | translate }}
            </button> </mat-card-actions
          ><br /><br />
        </div>
      </div>
    </div>

    <mat-card-actions align="center">
      <button
        mat-raised-button
        color="primary"
        style="margin-right: 20px"
        (click)="addNewAddress()"
        type="button"
      >
        &plus; {{ "userButton.addAddress" | translate }}
      </button> </mat-card-actions
    ><br /><br />
    <mat-card-actions>
      <button
        mat-raised-button
        type="submit"
        color="primary"
        style="margin-right: 20px"
      >
        {{ "userButton.submit" | translate }}
      </button>
    </mat-card-actions>
  </form>
</div>
